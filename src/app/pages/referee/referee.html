<app-header></app-header>

<main class="container my-4">
  <h2 class="mb-4">Panel de Árbitro</h2>
  <p class="text-muted">Árbitro: {{ refereeName }}</p>

  <!-- Partidos Asignados -->
  <section class="mb-5">
    <h4 class="mb-3">Mis Partidos Asignados</h4>
    
    <div *ngIf="refereeMatches.length === 0" class="panel p-4 text-center">
      <p class="text-muted">No tienes partidos asignados actualmente</p>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="panel p-3" *ngIf="refereeMatches.length > 0">
          <div class="table-responsive">
            <table class="table table-dark table-hover">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Deporte</th>
                  <th>Local</th>
                  <th>Visitante</th>
                  <th>Ubicación</th>
                  <th>Resultado</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let match of refereeMatches">
                  <td>{{ match.date | date: 'dd/MM/yyyy HH:mm' }}</td>
                  <td>
                    <span class="badge bg-secondary">{{ match.sport }}</span>
                  </td>
                  <td>{{ match.teamA }}</td>
                  <td>{{ match.teamB }}</td>
                  <td>{{ match.location }}</td>
                  <td>
                    <span *ngIf="match.scoreA !== undefined">
                      {{ match.scoreA }} - {{ match.scoreB }}
                    </span>
                    <span *ngIf="match.scoreA === undefined" class="text-muted">Pendiente</span>
                  </td>
                  <td>
                    <span class="badge" 
                          [class.bg-warning]="match.status === 'pending'"
                          [class.bg-success]="match.status === 'finished'"
                          [class.bg-info]="match.status === 'review'">
                      {{ match.status === 'pending' ? 'Por Jugar' : match.status === 'finished' ? 'Finalizado' : 'En Revisión' }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Estadísticas del Árbitro -->
  <section class="mb-5">
    <h4 class="mb-3">Mis Estadísticas</h4>
    <div class="row">
      <div class="col-md-4">
        <div class="panel p-4 text-center">
          <h3 class="text-accent">{{ refereeMatches.length }}</h3>
          <p class="text-muted mb-0">Partidos Totales</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="panel p-4 text-center">
          <h3 class="text-accent">{{ (refereeMatches | filter: 'status': 'finished').length }}</h3>
          <p class="text-muted mb-0">Partidos Arbitrados</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="panel p-4 text-center">
          <h3 class="text-accent">{{ (refereeMatches | filter: 'status': 'pending').length }}</h3>
          <p class="text-muted mb-0">Pendientes</p>
        </div>
      </div>
    </div>
  </section>
</main>

<app-footer></app-footer>